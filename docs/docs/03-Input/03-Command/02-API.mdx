---
slug: /input/commandinput/api
---

<div class="api">

# commandinput

```go
import "github.com/aschey/bubbleprompt/input/commandinput"
```

Package commandinput provides an implementation of the [input.Input](/input/api#type-input) interface.
It should be used to build interactive CLI applications.

<details><summary>Example</summary>
<p>

```go
package main

import (
	"fmt"
	"os"
	"strconv"

	prompt "github.com/aschey/bubbleprompt"
	"github.com/aschey/bubbleprompt/completer"
	"github.com/aschey/bubbleprompt/executor"
	"github.com/aschey/bubbleprompt/input/commandinput"
	"github.com/aschey/bubbleprompt/suggestion"
	tea "github.com/charmbracelet/bubbletea"
	"github.com/charmbracelet/lipgloss"
)

type cmdMetadata struct {
	commandinput.CommandMetadata
	children []suggestion.Suggestion[cmdMetadata]
}

type secretMsg string

func (c cmdMetadata) Children() []suggestion.Suggestion[cmdMetadata] {
	return c.children
}

type model struct {
	suggestions        []suggestion.Suggestion[cmdMetadata]
	textInput          *commandinput.Model[cmdMetadata]
	secret             string
	executorValueStyle lipgloss.Style
}

func (m model) Complete(promptModel prompt.Model[cmdMetadata]) ([]suggestion.Suggestion[cmdMetadata], error) {
	parsed := m.textInput.ParsedValue()
	completed := m.textInput.CompletedArgsBeforeCursor()
	if len(completed) == 1 && parsed.Command.Value == "get" && parsed.Args[0].Value == "weather" {
		flags := []commandinput.FlagInput{
			{
				Short:          "d",
				Long:           "days",
				ArgPlaceholder: m.textInput.NewFlagPlaceholder("<int>"),
				Description:    "Forecast days",
			},
		}
		return m.textInput.FlagSuggestions(m.textInput.CurrentTokenBeforeCursor(), flags, nil), nil
	}
	return completer.GetRecursiveSuggestions(m.textInput.Tokens(), m.textInput.CursorIndex(), m.suggestions), nil
}

func (m model) Execute(input string, promptModel *prompt.Model[cmdMetadata]) (tea.Model, error) {
	parsed := m.textInput.ParsedValue()
	args := parsed.Args
	flags := parsed.Flags
	if len(args) == 0 {
		return nil, fmt.Errorf("1 argument required")
	}
	arg := args[0]
	switch parsed.Command.Value {
	case "get":
		switch arg.Value {
		case "weather":
			days := "1"
			if len(flags) > 0 {
				flag := flags[0]
				if flag.Name.Value == "-d" || flag.Name.Value == "--days" {
					if flag.Value == nil {
						return nil, fmt.Errorf("flag value required")
					}
					_, err := strconv.ParseInt(flag.Value.Value, 10, 64)
					if err != nil {
						return nil, fmt.Errorf("flag value must be a valid int")
					}
					days = flag.Value.Value
				}
			}
			days = m.executorValueStyle.Render(days)
			value := m.executorValueStyle.Render("cloudy with a chance of meatballs")
			return executor.NewStringModel(fmt.Sprintf("weather for the next %s day(s) is: %s", days, value)), nil
		case "secret":
			return executor.NewStringModel("the secret is: " + m.executorValueStyle.Render(m.secret)), nil
		}
	case "set":
		switch arg.Value {
		case "secret":
			if len(args) < 2 {
				return nil, fmt.Errorf("secret value required")
			}
			secretVal := args[1]

			return executor.NewCmdModel("Secret updated", func() tea.Msg {
				return secretMsg(secretVal.Unquote())
			}), nil
		}
	}
	return nil, fmt.Errorf("Invalid input")
}

func (m model) Update(msg tea.Msg) (prompt.InputHandler[cmdMetadata], tea.Cmd) {
	if msg, ok := msg.(secretMsg); ok {
		m.secret = string(msg)
	}
	return m, nil
}

func main() {
	textInput := commandinput.New[cmdMetadata]()
	secretArgs := textInput.NewPositionalArgs("<secret value>")
	secretArgs[0].ArgStyle = lipgloss.NewStyle().Foreground(lipgloss.Color("6"))

	commandMetadata := commandinput.MetadataFromPositionalArgs(textInput.NewPositionalArg("<command>"))

	suggestions := []suggestion.Suggestion[cmdMetadata]{
		{
			Text:        "get",
			Description: "retrieve things",
			Metadata: cmdMetadata{
				CommandMetadata: commandMetadata,
				children: []suggestion.Suggestion[cmdMetadata]{
					{
						Text:        "secret",
						Description: "get the secret",
						Metadata: cmdMetadata{
							CommandMetadata: commandinput.CommandMetadata{Level: 1},
						},
					},
					{
						Text:        "weather",
						Description: "get the weather",
						Metadata: cmdMetadata{
							CommandMetadata: commandinput.CommandMetadata{
								Level:               1,
								ShowFlagPlaceholder: true,
							},
						},
					},
				},
			},
		},
		{
			Text:        "set",
			Description: "update things",
			Metadata: cmdMetadata{
				CommandMetadata: commandMetadata,
				children: []suggestion.Suggestion[cmdMetadata]{
					{
						Text:        "secret",
						Description: "update the secret",
						Metadata: cmdMetadata{
							CommandMetadata: commandinput.CommandMetadata{
								Level:          1,
								PositionalArgs: secretArgs,
							},
						},
					},
				},
			},
		},
	}
	model := model{
		suggestions:        suggestions,
		textInput:          textInput,
		secret:             "hunter2",
		executorValueStyle: lipgloss.NewStyle().Foreground(lipgloss.Color("13")),
	}

	promptModel := prompt.New[cmdMetadata](
		model,
		textInput,
	)

	if _, err := tea.NewProgram(promptModel, tea.WithFilter(prompt.MsgFilter)).Run(); err != nil {
		fmt.Printf("Could not start program\n%v\n", err)
		os.Exit(1)
	}
}
```

</p>
</details>

## Index

- [Variables](<#variables>)
- [type Arg](<#type-arg>)
- [type CommandMetadata](<#type-commandmetadata>)
  - [func MetadataFromPositionalArgs(positionalArgs ...PositionalArg) CommandMetadata](<#func-metadatafrompositionalargs>)
  - [func \(m CommandMetadata\) GetFlagArgPlaceholder\(\) FlagArgPlaceholder](<#func-commandmetadata-getflagargplaceholder>)
  - [func \(m CommandMetadata\) GetLevel\(\) int](<#func-commandmetadata-getlevel>)
  - [func \(m CommandMetadata\) GetPositionalArgs\(\) \[\]PositionalArg](<#func-commandmetadata-getpositionalargs>)
  - [func \(m CommandMetadata\) GetPreservePlaceholder\(\) bool](<#func-commandmetadata-getpreserveplaceholder>)
  - [func \(m CommandMetadata\) GetShowFlagPlaceholder\(\) bool](<#func-commandmetadata-getshowflagplaceholder>)
- [type CommandMetadataAccessor](<#type-commandmetadataaccessor>)
- [type Flag](<#type-flag>)
- [type FlagArgPlaceholder](<#type-flagargplaceholder>)
  - [func \(p FlagArgPlaceholder\) Text\(\) string](<#func-flagargplaceholder-text>)
- [type FlagFormatter](<#type-flagformatter>)
- [type FlagInput](<#type-flaginput>)
  - [func \(f FlagInput\) LongFlag\(\) string](<#func-flaginput-longflag>)
  - [func \(f FlagInput\) RequiresArg\(\) bool](<#func-flaginput-requiresarg>)
  - [func \(f FlagInput\) ShortFlag\(\) string](<#func-flaginput-shortflag>)
- [type FlagValueFormatter](<#type-flagvalueformatter>)
- [type Formatters](<#type-formatters>)
  - [func DefaultFormatters() Formatters](<#func-defaultformatters>)
- [type Model](<#type-model>)
  - [func New[T CommandMetadataAccessor](opts ...Option[T]) *Model[T]](<#func-new>)
  - [func \(m \*Model\[T\]\) ArgsBeforeCursor\(\) \[\]string](<#func-modelt-argsbeforecursor>)
  - [func \(m \*Model\[T\]\) Blur\(\)](<#func-modelt-blur>)
  - [func \(m \*Model\[T\]\) CommandBeforeCursor\(\) string](<#func-modelt-commandbeforecursor>)
  - [func \(m Model\[T\]\) CommandCompleted\(\) bool](<#func-modelt-commandcompleted>)
  - [func \(m \*Model\[T\]\) CompletedArgsBeforeCursor\(\) \[\]string](<#func-modelt-completedargsbeforecursor>)
  - [func \(m Model\[T\]\) CurrentToken\(\) string](<#func-modelt-currenttoken>)
  - [func \(m Model\[T\]\) CurrentTokenBeforeCursor\(\) string](<#func-modelt-currenttokenbeforecursor>)
  - [func \(m Model\[T\]\) CurrentTokenBeforeCursorRoundDown\(\) string](<#func-modelt-currenttokenbeforecursorrounddown>)
  - [func \(m Model\[T\]\) CurrentTokenPosition\(\) TokenPosition](<#func-modelt-currenttokenposition>)
  - [func \(m Model\[T\]\) CurrentTokenPositionRoundDown\(\) TokenPosition](<#func-modelt-currenttokenpositionrounddown>)
  - [func \(m Model\[T\]\) CurrentTokenRoundDown\(\) string](<#func-modelt-currenttokenrounddown>)
  - [func \(m Model\[T\]\) CursorIndex\(\) int](<#func-modelt-cursorindex>)
  - [func \(m Model\[T\]\) CursorOffset\(\) int](<#func-modelt-cursoroffset>)
  - [func \(m \*Model\[T\]\) FlagSuggestions\(inputStr string, flags \[\]FlagInput, suggestionFunc func\(FlagInput\) T\) \[\]suggestion.Suggestion\[T\]](<#func-modelt-flagsuggestions>)
  - [func \(m \*Model\[T\]\) Focus\(\) tea.Cmd](<#func-modelt-focus>)
  - [func \(m Model\[T\]\) Focused\(\) bool](<#func-modelt-focused>)
  - [func \(m Model\[T\]\) Formatters\(\) Formatters](<#func-modelt-formatters>)
  - [func \(m Model\[T\]\) HasArgs\(\) bool](<#func-modelt-hasargs>)
  - [func \(m \*Model\[T\]\) Init\(\) tea.Cmd](<#func-modelt-init>)
  - [func \(m Model\[T\]\) LastArg\(\) \*input.Token](<#func-modelt-lastarg>)
  - [func \(m \*Model\[T\]\) NewFlagPlaceholder\(placeholder string\) FlagArgPlaceholder](<#func-modelt-newflagplaceholder>)
  - [func \(m \*Model\[T\]\) NewPositionalArg\(placeholder string\) PositionalArg](<#func-modelt-newpositionalarg>)
  - [func \(m \*Model\[T\]\) NewPositionalArgs\(placeholders ...string\) \[\]PositionalArg](<#func-modelt-newpositionalargs>)
  - [func \(m \*Model\[T\]\) OnExecutorFinished\(\)](<#func-modelt-onexecutorfinished>)
  - [func \(m \*Model\[T\]\) OnSuggestionChanged\(suggestion suggestion.Suggestion\[T\]\)](<#func-modelt-onsuggestionchanged>)
  - [func \(m \*Model\[T\]\) OnSuggestionUnselected\(\)](<#func-modelt-onsuggestionunselected>)
  - [func \(m \*Model\[T\]\) OnUpdateFinish\(msg tea.Msg, suggestion \*suggestion.Suggestion\[T\], isSelected bool\) tea.Cmd](<#func-modelt-onupdatefinish>)
  - [func \(m \*Model\[T\]\) OnUpdateStart\(msg tea.Msg\) tea.Cmd](<#func-modelt-onupdatestart>)
  - [func \(m \*Model\[T\]\) ParsedValue\(\) Statement](<#func-modelt-parsedvalue>)
  - [func \(m \*Model\[T\]\) Prompt\(\) string](<#func-modelt-prompt>)
  - [func \(m \*Model\[T\]\) ResetValue\(\)](<#func-modelt-resetvalue>)
  - [func \(m \*Model\[T\]\) Runes\(\) \[\]rune](<#func-modelt-runes>)
  - [func \(m \*Model\[T\]\) SetCursor\(pos int\)](<#func-modelt-setcursor>)
  - [func \(m \*Model\[T\]\) SetCursorMode\(cursorMode cursor.Mode\) tea.Cmd](<#func-modelt-setcursormode>)
  - [func \(m \*Model\[T\]\) SetFormatters\(formatters Formatters\)](<#func-modelt-setformatters>)
  - [func \(m \*Model\[T\]\) SetPrompt\(prompt string\)](<#func-modelt-setprompt>)
  - [func \(m \*Model\[T\]\) SetValue\(s string\)](<#func-modelt-setvalue>)
  - [func \(m \*Model\[T\]\) ShouldClearSuggestions\(prevText \[\]rune, msg tea.KeyMsg\) bool](<#func-modelt-shouldclearsuggestions>)
  - [func \(m \*Model\[T\]\) ShouldSelectSuggestion\(suggestion suggestion.Suggestion\[T\]\) bool](<#func-modelt-shouldselectsuggestion>)
  - [func \(m \*Model\[T\]\) ShouldUnselectSuggestion\(prevRunes \[\]rune, msg tea.KeyMsg\) bool](<#func-modelt-shouldunselectsuggestion>)
  - [func \(m \*Model\[T\]\) SuggestionRunes\(runes \[\]rune\) \[\]rune](<#func-modelt-suggestionrunes>)
  - [func \(m Model\[T\]\) Tokens\(\) \[\]input.Token](<#func-modelt-tokens>)
  - [func \(m Model\[T\]\) TokensBeforeCursor\(\) \[\]input.Token](<#func-modelt-tokensbeforecursor>)
  - [func \(m \*Model\[T\]\) Value\(\) string](<#func-modelt-value>)
  - [func \(m Model\[T\]\) Values\(\) \[\]string](<#func-modelt-values>)
  - [func \(m Model\[T\]\) ValuesBeforeCursor\(\) \[\]string](<#func-modelt-valuesbeforecursor>)
  - [func \(m Model\[T\]\) View\(viewMode input.ViewMode\) string](<#func-modelt-view>)
- [type Option](<#type-option>)
  - [func WithCursorMode[T CommandMetadataAccessor](cursorMode cursor.Mode) Option[T]](<#func-withcursormode>)
  - [func WithDefaultDelimiter[T CommandMetadataAccessor](defaultDelimiter string) Option[T]](<#func-withdefaultdelimiter>)
  - [func WithFormatters[T CommandMetadataAccessor](formatters Formatters) Option[T]](<#func-withformatters>)
  - [func WithPrompt[T CommandMetadataAccessor](prompt string) Option[T]](<#func-withprompt>)
- [type PositionalArg](<#type-positionalarg>)
  - [func \(p PositionalArg\) Placeholder\(\) string](<#func-positionalarg-placeholder>)
- [type PositionalArgFormatter](<#type-positionalargformatter>)
- [type RoundingBehavior](<#type-roundingbehavior>)
- [type Statement](<#type-statement>)
- [type TokenPosition](<#type-tokenposition>)


## Variables

```go
var DefaultBoolFlagForeground = "13"
```

```go
var DefaultCurrentPlaceholderSuggestion = "240"
```

```go
var DefaultFlagForeground = "245"
```

```go
var DefaultFlagPlaceholderForeground = "14"
```

```go
var DefaultNumberFlagForeground = "5"
```

```go
var DefaultPlaceholderForeground = "14"
```

```go
var DefaultSelectedTextColor = "10"
```

## type [Arg](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/parser.go#L51-L54>)

```go
type Arg struct {
    Start int
    Value string
}
```

## type [CommandMetadata](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/command_metadata.go#L20-L29>)

CommandMetadata defines the metadata that the [Model](/input/commandinput/api#type-model) uses to get information about the supplied [suggestion.Suggestion](/suggestion/api#type-suggestion).
You can extend this struct to provide additional metadata.

```go
type CommandMetadata struct {
    // PositionalArgs is the list of positional args that this suggestion accepts.
    PositionalArgs []PositionalArg
    // ShowFlagPlaceholder is whether or not the input should display a placeholder indicating that this command has flags available.
    ShowFlagPlaceholder bool
    // FlagArgPlaceholder is the placeholder
    FlagArgPlaceholder  FlagArgPlaceholder
    Level               int
    PreservePlaceholder bool
}
```

### func [MetadataFromPositionalArgs](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/command_metadata.go#L32>)

```go
func MetadataFromPositionalArgs(positionalArgs ...PositionalArg) CommandMetadata
```

MetadataFromPositionalArgs is a convenience function for creating a [CommandMetadata](/input/commandinput/api#type-commandmetadata) from one or more [PositionalArg](/input/commandinput/api#type-positionalarg).

<details><summary>Example</summary>
<p>

```go
package main

import (
	"fmt"

	"github.com/aschey/bubbleprompt/input/commandinput"
	"github.com/aschey/bubbleprompt/suggestion"
)

func main() {
	textInput := commandinput.New[commandinput.CommandMetadata]()
	commandMetadata := commandinput.MetadataFromPositionalArgs(textInput.NewPositionalArg("<arg1>"))

	suggestions := []suggestion.Suggestion[commandinput.CommandMetadata]{
		{Text: "test", Metadata: commandMetadata},
	}

	fmt.Println(suggestions[0].Metadata.GetPositionalArgs()[0].Placeholder())
}
```

#### Output

```
<arg1>
```

</p>
</details>

### func \(CommandMetadata\) [GetFlagArgPlaceholder](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/command_metadata.go#L44>)

```go
func (m CommandMetadata) GetFlagArgPlaceholder() FlagArgPlaceholder
```

GetFlagArgPlaceholder returns the [FlagPlaceholder] for the flag's argument.

### func \(CommandMetadata\) [GetLevel](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/command_metadata.go#L55>)

```go
func (m CommandMetadata) GetLevel() int
```

GetLevel returns the nesting level of the [suggestion.Suggestion](/suggestion/api#type-suggestion).
For example, a level of 1 means the suggestion is nested one level higher than the root command.

### func \(CommandMetadata\) [GetPositionalArgs](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/command_metadata.go#L39>)

```go
func (m CommandMetadata) GetPositionalArgs() []PositionalArg
```

GetPositionalArgs returns the list of [PositionalArg](/input/commandinput/api#type-positionalarg) for the associated [suggestion.Suggestion](/suggestion/api#type-suggestion).

### func \(CommandMetadata\) [GetPreservePlaceholder](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/command_metadata.go#L60>)

```go
func (m CommandMetadata) GetPreservePlaceholder() bool
```

TODO: Figure out why we need this.

### func \(CommandMetadata\) [GetShowFlagPlaceholder](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/command_metadata.go#L49>)

```go
func (m CommandMetadata) GetShowFlagPlaceholder() bool
```

GetShowFlagPlaceholder returns whether or not to show the placeholder indicating this [suggestion.Suggestion](/suggestion/api#type-suggestion) has available flags.

## type [CommandMetadataAccessor](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/command_metadata.go#L4-L16>)

CommandMetadataAccessor defines the interface that the [Model](/input/commandinput/api#type-model) uses to get information about the supplied [suggestion.Suggestion](/suggestion/api#type-suggestion).

```go
type CommandMetadataAccessor interface {
    // GetPositionalArgs returns the list of PositionalArgs for the associated suggestion.
    GetPositionalArgs() []PositionalArg
    // GetFlagArgPlaceholder returns the placeholder for the flag's argument.
    GetFlagArgPlaceholder() FlagArgPlaceholder
    // GetLevel returns the nesting level of the suggestion.
    // For example, a level of 1 means the suggestion is nested one level higher than the root command.
    GetLevel() int
    // TODO: Figure out why we need this.
    GetPreservePlaceholder() bool
    // GetShowFlagPlaceholder returns whether or not to show the placeholder indicating this suggestion has available flags.
    GetShowFlagPlaceholder() bool
}
```

## type [Flag](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/parser.go#L101-L104>)

```go
type Flag struct {
    Name  input.Token
    Value *input.Token
}
```

## type [FlagArgPlaceholder](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L39-L42>)

```go
type FlagArgPlaceholder struct {
    Style lipgloss.Style
    // contains filtered or unexported fields
}
```

### func \(FlagArgPlaceholder\) [Text](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L44>)

```go
func (p FlagArgPlaceholder) Text() string
```

## type [FlagFormatter](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/formatters.go#L18-L21>)

```go
type FlagFormatter struct {
    Flag        lipgloss.Style
    Placeholder lipgloss.Style
}
```

## type [FlagInput](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L48-L53>)

```go
type FlagInput struct {
    Short          string
    Long           string
    ArgPlaceholder FlagArgPlaceholder
    Description    string
}
```

### func \(FlagInput\) [LongFlag](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L62>)

```go
func (f FlagInput) LongFlag() string
```

### func \(FlagInput\) [RequiresArg](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L69>)

```go
func (f FlagInput) RequiresArg() bool
```

### func \(FlagInput\) [ShortFlag](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L55>)

```go
func (f FlagInput) ShortFlag() string
```

## type [FlagValueFormatter](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/formatters.go#L23-L27>)

```go
type FlagValueFormatter struct {
    String lipgloss.Style
    Bool   lipgloss.Style
    Number lipgloss.Style
}
```

## type [Formatters](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/formatters.go#L29-L38>)

```go
type Formatters struct {
    PositionalArg PositionalArgFormatter
    Flag          FlagFormatter
    FlagValue     FlagValueFormatter
    Placeholder   lipgloss.Style
    Prompt        lipgloss.Style
    Text          lipgloss.Style
    SelectedText  lipgloss.Style
    Cursor        lipgloss.Style
}
```

### func [DefaultFormatters](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/formatters.go#L40>)

```go
func DefaultFormatters() Formatters
```

## type [Model](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L75-L92>)

A Model is an input for handling CLI-style inputs.
It provides advanced features such as placeholders and context-aware suggestions.

```go
type Model[T CommandMetadataAccessor] struct {
    // contains filtered or unexported fields
}
```

### func [New](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L108>)

```go
func New[T CommandMetadataAccessor](opts ...Option[T]) *Model[T]
```

New creates a new model.

### func \(\*Model\[T\]\) [ArgsBeforeCursor](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L212>)

```go
func (m *Model[T]) ArgsBeforeCursor() []string
```

ArgsBeforeCursor returns the positional arguments before the cursor position.

### func \(\*Model\[T\]\) [Blur](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L763>)

```go
func (m *Model[T]) Blur()
```

Blur removes the focus from the input.

### func \(\*Model\[T\]\) [CommandBeforeCursor](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L519>)

```go
func (m *Model[T]) CommandBeforeCursor() string
```

CommandBeforeCursor returns the portion of the command (first input token) before the cursor position.

### func \(Model\[T\]\) [CommandCompleted](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L754>)

```go
func (m Model[T]) CommandCompleted() bool
```

CommandCompleted returns whether the user finished typing the entire command (first token).

### func \(\*Model\[T\]\) [CompletedArgsBeforeCursor](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L226>)

```go
func (m *Model[T]) CompletedArgsBeforeCursor() []string
```

CompletedArgsBeforeCursor returns the positional arguments before the cursor that have already been completed.
In other words, there needs to be a delimiter after the argument to indicate that the user has finished entering in that argument.

### func \(Model\[T\]\) [CurrentToken](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L713>)

```go
func (m Model[T]) CurrentToken() string
```

CurrentToken returns the token under the cursor.
If the cursor is between two tokens, it will take the token after the cursor.

### func \(Model\[T\]\) [CurrentTokenBeforeCursor](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L701>)

```go
func (m Model[T]) CurrentTokenBeforeCursor() string
```

CurrentTokenBeforeCursor returns the portion of the current token before the cursor.
If the cursor is between two tokens, it will take the token after the cursor.

### func \(Model\[T\]\) [CurrentTokenBeforeCursorRoundDown](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L707>)

```go
func (m Model[T]) CurrentTokenBeforeCursorRoundDown() string
```

CurrentTokenBeforeCursorRoundDown returns the portion of the current token before the cursor.
If the cursor is between two tokens, it will take the token before the cursor.

### func \(Model\[T\]\) [CurrentTokenPosition](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L652>)

```go
func (m Model[T]) CurrentTokenPosition() TokenPosition
```

CurrentTokenPosition returns the [TokenPosition](/input/commandinput/api#type-tokenposition) of the token under the cursor.
If the cursor is between two tokens, it will take the token after the cursor.

### func \(Model\[T\]\) [CurrentTokenPositionRoundDown](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L658>)

```go
func (m Model[T]) CurrentTokenPositionRoundDown() TokenPosition
```

CurrentTokenPosition returns the [TokenPosition](/input/commandinput/api#type-tokenposition) of the token under the cursor.
If the cursor is between two tokens, it will take the token before the cursor.

### func \(Model\[T\]\) [CurrentTokenRoundDown](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L719>)

```go
func (m Model[T]) CurrentTokenRoundDown() string
```

CurrentTokenRoundDown returns the token under the cursor.
If the cursor is between two tokens, it will take the token before the cursor.

### func \(Model\[T\]\) [CursorIndex](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L598>)

```go
func (m Model[T]) CursorIndex() int
```

CursorIndex returns the cursor index in terms of number of unicode characters.
Use this to calculate input lengths in terms of number of characters entered.

### func \(Model\[T\]\) [CursorOffset](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L605>)

```go
func (m Model[T]) CursorOffset() int
```

CursorOffset returns the visual offset of the cursor in terms
of number of terminal cells. Use this for calculating visual dimensions
such as input width/height.

### func \(\*Model\[T\]\) [FlagSuggestions](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L262>)

```go
func (m *Model[T]) FlagSuggestions(inputStr string, flags []FlagInput, suggestionFunc func(FlagInput) T) []suggestion.Suggestion[T]
```

FlagSuggestions generates a slice of [suggestion.Suggestion](/suggestion/api#type-suggestion) based on the input string and the slice of [FlagInput](/input/commandinput/api#type-flaginput) supplied.
The last parameter can be used to customize the metadata for the returned suggestions.

<details><summary>Example</summary>
<p>

```go
package main

import (
	"fmt"

	"github.com/aschey/bubbleprompt/input/commandinput"
)

func main() {
	textInput := commandinput.New[commandinput.CommandMetadata]()
	flags := []commandinput.FlagInput{
		{
			Short:          "i",
			Long:           "interval",
			Description:    "refresh interval",
			ArgPlaceholder: textInput.NewFlagPlaceholder("<value>"),
		},
	}

	suggestions := textInput.FlagSuggestions("", flags, nil)
	fmt.Printf("Text: %s, Description: %s\n", suggestions[0].Text, suggestions[0].Description)

	suggestions = textInput.FlagSuggestions("--", flags, nil)
	fmt.Printf("Text: %s, Description: %s\n", suggestions[0].Text, suggestions[0].Description)

	suggestions = textInput.FlagSuggestions("", flags,
		func(flagInput commandinput.FlagInput) commandinput.CommandMetadata {
			return commandinput.CommandMetadata{
				FlagArgPlaceholder:  flagInput.ArgPlaceholder,
				PreservePlaceholder: true,
			}
		})
	fmt.Printf("Text: %s, Description: %s, Preserve Placeholder: %t\n",
		suggestions[0].Text, suggestions[0].Description, suggestions[0].Metadata.PreservePlaceholder)

}
```

#### Output

```
Text: -i, Description: refresh interval
Text: --interval, Description: refresh interval
Text: -i, Description: refresh interval, Preserve Placeholder: true
```

</p>
</details>

### func \(\*Model\[T\]\) [Focus](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L492>)

```go
func (m *Model[T]) Focus() tea.Cmd
```

Focus sets the keyboard focus on the editor so the user can enter text.

### func \(Model\[T\]\) [Focused](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L497>)

```go
func (m Model[T]) Focused() bool
```

Focused returns whether the keyboard is focused on the input.

### func \(Model\[T\]\) [Formatters](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L141>)

```go
func (m Model[T]) Formatters() Formatters
```

Formatters returns the formatters used by the input.

### func \(Model\[T\]\) [HasArgs](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L734>)

```go
func (m Model[T]) HasArgs() bool
```

HasArgs returns whether the input has any positional arguments.

### func \(\*Model\[T\]\) [Init](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L131>)

```go
func (m *Model[T]) Init() tea.Cmd
```

Init is part of the [input.Input](/input/api#type-input) interface. It should not be invoked by users of this library.

### func \(Model\[T\]\) [LastArg](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L745>)

```go
func (m Model[T]) LastArg() *input.Token
```

LastArg returns the last positional argument in the input.
If there are no arguments, it returns nil.

### func \(\*Model\[T\]\) [NewFlagPlaceholder](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L164>)

```go
func (m *Model[T]) NewFlagPlaceholder(placeholder string) FlagArgPlaceholder
```

NewFlagPlaceholder creates a flag placeholder for completions.

<details><summary>Example</summary>
<p>

```go
package main

import (
	"fmt"

	"github.com/aschey/bubbleprompt/input/commandinput"
)

func main() {
	textInput := commandinput.New[commandinput.CommandMetadata]()

	flags := []commandinput.FlagInput{
		{
			Short:          "d",
			Long:           "days",
			ArgPlaceholder: textInput.NewFlagPlaceholder("<number of days>"),
			Description:    "Forecast days",
		},
	}

	fmt.Println(flags[0].ArgPlaceholder.Text())
}
```

#### Output

```
<number of days>
```

</p>
</details>

### func \(\*Model\[T\]\) [NewPositionalArg](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L146>)

```go
func (m *Model[T]) NewPositionalArg(placeholder string) PositionalArg
```

NewPositionalArg creates a positional arg placeholder for completions.

<details><summary>Example</summary>
<p>

```go
package main

import (
	"fmt"

	"github.com/aschey/bubbleprompt/input/commandinput"
	"github.com/aschey/bubbleprompt/suggestion"
)

func main() {
	textInput := commandinput.New[commandinput.CommandMetadata]()
	commandMetadata := commandinput.CommandMetadata{
		PositionalArgs: []commandinput.PositionalArg{textInput.NewPositionalArg("<arg1>")},
	}

	suggestions := []suggestion.Suggestion[commandinput.CommandMetadata]{
		{Text: "test", Metadata: commandMetadata},
	}

	fmt.Println(suggestions[0].Metadata.GetPositionalArgs()[0].Placeholder())
}
```

#### Output

```
<arg1>
```

</p>
</details>

### func \(\*Model\[T\]\) [NewPositionalArgs](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L155>)

```go
func (m *Model[T]) NewPositionalArgs(placeholders ...string) []PositionalArg
```

NewPositionalArgs creates multiple positional arg placeholders for completions.

<details><summary>Example</summary>
<p>

```go
package main

import (
	"fmt"

	"github.com/aschey/bubbleprompt/input/commandinput"
	"github.com/aschey/bubbleprompt/suggestion"
)

func main() {
	textInput := commandinput.New[commandinput.CommandMetadata]()
	commandMetadata := commandinput.CommandMetadata{
		PositionalArgs: textInput.NewPositionalArgs("<arg1>", "<arg2>"),
	}

	suggestions := []suggestion.Suggestion[commandinput.CommandMetadata]{
		{Text: "test", Metadata: commandMetadata},
	}

	fmt.Println(suggestions[0].Metadata.GetPositionalArgs()[0].Placeholder())
	fmt.Println(suggestions[0].Metadata.GetPositionalArgs()[1].Placeholder())
}
```

#### Output

```
<arg1>
<arg2>
```

</p>
</details>

### func \(\*Model\[T\]\) [OnExecutorFinished](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L769>)

```go
func (m *Model[T]) OnExecutorFinished()
```

OnExecutorFinished is part of the [input.Input](/input/api#type-input) interface.
It should not be invoked by users of this library.

### func \(\*Model\[T\]\) [OnSuggestionChanged](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L434>)

```go
func (m *Model[T]) OnSuggestionChanged(suggestion suggestion.Suggestion[T])
```

OnSuggestionChanged is part of the [input.Input](/input/api#type-input) interface. It should not be invoked by users of this library.

### func \(\*Model\[T\]\) [OnSuggestionUnselected](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L478>)

```go
func (m *Model[T]) OnSuggestionUnselected()
```

OnSuggestionUnselected is part of the [input.Input](/input/api#type-input) interface. It should not be invoked by users of this library.

### func \(\*Model\[T\]\) [OnUpdateFinish](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L356>)

```go
func (m *Model[T]) OnUpdateFinish(msg tea.Msg, suggestion *suggestion.Suggestion[T], isSelected bool) tea.Cmd
```

OnUpdateFinish is part of the [input.Input](/input/api#type-input) interface.
It should not be invoked by users of this library.

### func \(\*Model\[T\]\) [OnUpdateStart](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L246>)

```go
func (m *Model[T]) OnUpdateStart(msg tea.Msg) tea.Cmd
```

OnUpdateStart is part of the [input.Input](/input/api#type-input) interface. It should not be invoked by users of this library.

### func \(\*Model\[T\]\) [ParsedValue](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L514>)

```go
func (m *Model[T]) ParsedValue() Statement
```

ParsedValue returns the input parsed into a [Statement](/input/commandinput/api#type-statement).

### func \(\*Model\[T\]\) [Prompt](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L622>)

```go
func (m *Model[T]) Prompt() string
```

Prompt returns the terminal prompt.

### func \(\*Model\[T\]\) [ResetValue](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L540>)

```go
func (m *Model[T]) ResetValue()
```

ResetValue clears the entire input.

### func \(\*Model\[T\]\) [Runes](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L509>)

```go
func (m *Model[T]) Runes() []rune
```

Runes returns the raw text entered by the user as a list of runes.
This is useful for indexing and length checks because doing these
operations on strings does not work well with some unicode characters.

### func \(\*Model\[T\]\) [SetCursor](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L612>)

```go
func (m *Model[T]) SetCursor(pos int)
```

SetCursor sets the cursor position.

### func \(\*Model\[T\]\) [SetCursorMode](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L617>)

```go
func (m *Model[T]) SetCursorMode(cursorMode cursor.Mode) tea.Cmd
```

SetCursorMode sets the mode of the cursor.

### func \(\*Model\[T\]\) [SetFormatters](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L136>)

```go
func (m *Model[T]) SetFormatters(formatters Formatters)
```

SetFormatters sets the formatters used by the input.

### func \(\*Model\[T\]\) [SetPrompt](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L627>)

```go
func (m *Model[T]) SetPrompt(prompt string)
```

SetPrompt sets the terminal prompt.

### func \(\*Model\[T\]\) [SetValue](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L529>)

```go
func (m *Model[T]) SetValue(s string)
```

SetValue overwrites the entire input with the given string.

### func \(\*Model\[T\]\) [ShouldClearSuggestions](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L207>)

```go
func (m *Model[T]) ShouldClearSuggestions(prevText []rune, msg tea.KeyMsg) bool
```

ShouldClearSuggestions is part of the [input.Input](/input/api#type-input) interface.
It should not be invoked by users of this library.

### func \(\*Model\[T\]\) [ShouldSelectSuggestion](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L173>)

```go
func (m *Model[T]) ShouldSelectSuggestion(suggestion suggestion.Suggestion[T]) bool
```

ShouldSelectSuggestion is part of the [input.Input](/input/api#type-input) interface.
It should not be invoked by users of this library.

### func \(\*Model\[T\]\) [ShouldUnselectSuggestion](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L182>)

```go
func (m *Model[T]) ShouldUnselectSuggestion(prevRunes []rune, msg tea.KeyMsg) bool
```

ShouldUnselectSuggestion is part of the [input.Input](/input/api#type-input) interface.
It should not be invoked by users of this library.

### func \(\*Model\[T\]\) [SuggestionRunes](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L483>)

```go
func (m *Model[T]) SuggestionRunes(runes []rune) []rune
```

SuggestionRunes is part of the [input.Input](/input/api#type-input) interface. It should not be invoked by users of this library.

### func \(Model\[T\]\) [Tokens](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L550>)

```go
func (m Model[T]) Tokens() []input.Token
```

Tokens returns the entire input as a list of [input.Token](/input/api#type-token).

### func \(Model\[T\]\) [TokensBeforeCursor](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L555>)

```go
func (m Model[T]) TokensBeforeCursor() []input.Token
```

TokensBeforeCursor returns the tokenized input before the cursor position.

### func \(\*Model\[T\]\) [Value](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L502>)

```go
func (m *Model[T]) Value() string
```

Value returns the raw text entered by the user.

### func \(Model\[T\]\) [Values](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L587>)

```go
func (m Model[T]) Values() []string
```

Values returns the tokenized input values.

### func \(Model\[T\]\) [ValuesBeforeCursor](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L563>)

```go
func (m Model[T]) ValuesBeforeCursor() []string
```

ValuesBeforeCursor returns the token values of the entire input before the cursor position.

### func \(Model\[T\]\) [View](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L773>)

```go
func (m Model[T]) View(viewMode input.ViewMode) string
```

View is part of the [input.Input](/input/api#type-input) interface.
It should not be invoked by users of this library.

## type [Option](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/option.go#L5>)

```go
type Option[T CommandMetadataAccessor] func(model *Model[T])
```

### func [WithCursorMode](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/option.go#L25>)

```go
func WithCursorMode[T CommandMetadataAccessor](cursorMode cursor.Mode) Option[T]
```

### func [WithDefaultDelimiter](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/option.go#L19>)

```go
func WithDefaultDelimiter[T CommandMetadataAccessor](defaultDelimiter string) Option[T]
```

### func [WithFormatters](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/option.go#L13>)

```go
func WithFormatters[T CommandMetadataAccessor](formatters Formatters) Option[T]
```

### func [WithPrompt](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/option.go#L7>)

```go
func WithPrompt[T CommandMetadataAccessor](prompt string) Option[T]
```

## type [PositionalArg](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L29-L33>)

```go
type PositionalArg struct {
    PlaceholderStyle lipgloss.Style
    ArgStyle         lipgloss.Style
    // contains filtered or unexported fields
}
```

### func \(PositionalArg\) [Placeholder](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L35>)

```go
func (p PositionalArg) Placeholder() string
```

## type [PositionalArgFormatter](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/formatters.go#L13-L16>)

```go
type PositionalArgFormatter struct {
    Placeholder lipgloss.Style
    Arg         lipgloss.Style
}
```

## type [RoundingBehavior](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L100>)

```go
type RoundingBehavior int
```

## type [Statement](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/parser.go#L32-L36>)

```go
type Statement struct {
    Command input.Token
    Args    []input.Token
    Flags   []Flag
}
```

## type [TokenPosition](<https://github.com/aschey/bubbleprompt/blob/main/input/commandinput/model.go#L94-L98>)

```go
type TokenPosition struct {
    Start int
    End   int
    Index int
}
```

</div>

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
